{
	"$id": "https://2018.restfest.org/midwest/schemas/fs-schema#",
	"$schema": "http://json-schema.org/draft-07/schema#",
	"base": "https://2018.restfest.org/midwest/api/",
	"title": "Sample File System Storage Schema",
	"description": "schema for an fstab entry",
	"type": "object",
	"definitions": {
		"diskDevice": {
			"type": "object",
			"properties": {
				"type": {
					"enum": ["disk"]
				},
				"device": {
					"type": "string",
					"pattern": "^/dev/[^/]+(/[^/]+)*$"
				}
			},
			"required": ["type", "device"],
			"additionalProperties": false
		},
		"diskUUID": {
			"type": "object",
			"properties": {
				"type": {
					"enum": ["disk"]
				},
				"label": {
					"type": "string",
					"pattern": "^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$"
				}
			},
			"required": ["type", "label"],
			"additionalProperties": false
		},
		"nfs": {
			"type": "object",
			"properties": {
				"id": {
					"type": "string"
				},
				"type": {
					"enum": ["nfs"]
				},
				"remotePath": {
					"type": "string",
					"pattern": "^(/[^/]+)+$"
				},
				"server": {
					"type": "string",
					"oneOf": [{
							"format": "hostname"
						},
						{
							"format": "ipv4"
						},
						{
							"format": "ipv6"
						}
					]
				}
			},
			"required": ["id", "type", "server", "remotePath"],
			"links": [{
				"rel": "self",
				"href": "storage/{id}",
				"templateRequired": ["id"],
				"targetSchema": {
					"$ref": "#/definitions/nfs"
				}
			}],
			"additionalProperties": false
		},
		"tmpfs": {
			"type": "object",
			"properties": {
				"type": {
					"enum": ["tmpfs"]
				},
				"sizeInMB": {
					"type": "integer",
					"minimum": 16,
					"maximum": 512
				}
			},
			"required": ["type", "sizeInMB"],
			"additionalProperties": false
		}
	},
	"properties": {
		"storage": {
			"$ref": "#/definitions/nfs"
		},
		"diskid": {
			"type": "string"
		},
		"fstype": {
			"enum": ["ext3", "ext4", "btrfs"]
		},
		"options": {
			"type": "array",
			"minItems": 1,
			"items": {
				"type": "string"
			},
			"uniqueItems": true
		},
		"readonly": {
			"type": "boolean"
		}
	},
	"required": ["storage"],
	"links": [{
		"rel": "item",
		"href": "/disk/{diskid}",
		"submissionSchema": {
			"$ref": "#/definitions/diskDevice"
		}
	}]
}